/*!
 * SwipeMe
 * Author: Loz Calver
 *
 * Copyright 2013, MIT License
 */
function SwipeMe(a,b){"use strict";function c(a){var b;for(b in d)"undefined"!=typeof a[b]&&(d[b]=a[b]);"string"==typeof d.direction&&(d.direction=[d.direction])}var d={accessClasses:{left:"access-left",right:"access-right"},direction:["left","right"]},e={hasClass:function(a,b){var c=new RegExp("\\b"+b+"\\b","g");return null!==a.className.match(c)},addClass:function(a,b){var c=a.className||"",d=new RegExp("\\b"+b+"\\b","g");null===c.match(d)&&(a.className=(c+=" "+b).trim())},removeClass:function(a,b){var c=a.className||"",d=new RegExp("\\b"+b+"\\b","g");a.className=c.replace(d,"").trim()},parentUntilAttr:function(a,b){return a.getAttribute&&a.getAttribute(b)?a:a.parentNode?this.parentUntilAttr(a.parentNode,b):!1}},f={swipe:function(b){var c="left"===b?"right":"left";e.hasClass(a,d.accessClasses[b])?e.removeClass(a,d.accessClasses[b]):e.hasClass(a,d.accessClasses[c])||-1===d.direction.indexOf(c)||e.addClass(a,d.accessClasses[c])}},g={start:{},differences:{},isHorizontal:null,invalidTarget:!1,handleEvent:function(a){switch(a.type){case"touchstart":this.touchstart(a);break;case"touchmove":this.touchmove(a);break;case"touchend":this.touchend(a)}},touchstart:function(a){var b=a.touches[0];g.start={x:b.pageX,y:b.pageY},e.parentUntilAttr(b.target,"data-swipeme-ignore")&&(g.invalidTarget=!0)},touchmove:function(a){var b=a.touches[0];g.differences={x:b.pageX-g.start.x,y:b.pageY-g.start.y},null===g.isHorizontal&&(g.isHorizontal=Math.abs(g.differences.x)>Math.abs(g.differences.y)),g.isHorizontal&&!g.invalidTarget&&a.preventDefault()},touchend:function(){if(g.isHorizontal&&!g.invalidTarget){var a=g.differences.x>0?"right":"left";f.swipe(a)}g.isHorizontal=null,g.invalidTarget=!1,g.differences={}}};return c(b),window.addEventListener&&(document.addEventListener("touchstart",g),document.addEventListener("touchmove",g),document.addEventListener("touchend",g)),{swipe:function(a){a=a||"left",f.swipe(a)}}}